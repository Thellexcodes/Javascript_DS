<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>
        class MinHeap{
            constructor(){
                this.heap = [];
            }

            insert(element){
                this.heap.push(element);
                this.bubbleUp();
            }

            bubbleUp(){
                let index = this.heap.length - 1;
                while(index > 0){
                    let parentIndex = Math.floor((index - 1) / 2);
                    if(this.heap[parentIndex] <= this.heap[index]) break;
                    [this.heap[parentIndex], this.heap[index]] = [this.heap[index], this.heap[parentIndex]];
                    index = parentIndex;
                }
            }

            extractMin(){
                if(this.heap.length === 0) return null;
                if(this.heap.length === 1) return this.heap.pop();

                const min = this.heap[0];
                this.heap[0] = this.heap.pop();
                this.bubbleDown();

                return min;
            }

            bubbleDown(){
                let index = 0;
                const length = this.heap.length;
                let smallest = index;

                while(true){
                    let leftChildIndex = 2 * index + 1;
                    let rightChildIndex = 2 * index + 2;

                    if(leftChildIndex < length && this.heap[leftChildIndex] < this.heap[smallest]){
                        smallest = leftChildIndex;
                    }
                    if(rightChildIndex < length && this.heap[rightChildIndex] < this.heap[smallest]){
                        smallest = rightChildIndex;
                    }
                    if(smallest === index) break;
                    
                    [this.heap[index], this.heap[smallest]] = [this.heap[smallest], this.heap[index]]

                    index = smallest

                }
            }

            peek(){
                if(this.heap.length === 0) return null;
                return this.heap[0]
            }

        }

        const minHeap = new MinHeap();

        minHeap.insert(3)
        minHeap.insert(4)
        minHeap.insert(7)
        minHeap.insert(9)
        minHeap.insert(10)
        minHeap.insert(1)
        minHeap.insert(0)

        console.log(minHeap.peek());
        console.log(minHeap.extractMin())
        console.log(minHeap.peek());
    </script>
</body>
</html>